import html
from pathlib import Path
from aiogram import Router, F, types
from aiogram.types import CallbackQuery, InputMediaPhoto

from bot.handlers.user.menu_command import show_donate_menu, show_menu_about_us, show_menu_contacts, show_start_menu
from bot.keyboards.user.keyboards import get_show_bank, get_support_us

router = Router()

@router.callback_query(F.data == "back_to_main")
async def back_to_menu(callback: CallbackQuery):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ '–ù–∞–∑–∞–¥' –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    await show_start_menu(callback, edit=True)  # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

@router.callback_query(F.data == "contacts")
async def menu_contacts(callback: CallbackQuery):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ '–ö–æ–Ω—Ç–∞–∫—Ç—ã'"""
    await show_menu_contacts(callback, edit=True)
    
@router.callback_query(F.data == "menu_about_us")
async def menu_about_us(callback: CallbackQuery):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ '–û –Ω–∞—Å'"""
    await show_menu_about_us(callback, edit=True)
    
@router.callback_query(F.data == "donate")
async def menu_support_us(callback: CallbackQuery):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ '–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å'"""
    await show_donate_menu(callback, edit=True)

@router.callback_query(F.data.startswith('show_'))
async def support_us_callback(callback: CallbackQuery):
    """–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –±–∞–Ω–∫–∞."""
    bank_name = callback.data.split('_')[1]
    bank_description = {
        "sberbank": (
                    "üè¶ <b>–°–±–µ—Ä–±–∞–Ω–∫</b>\n\n"
                    "–ü–æ–ª—É—á–∞—Ç–µ–ª—å: <i>–°–µ—Ä–≥–µ–π –ò–≤–∞–Ω–æ–≤–∏—á –ö.</i>\n"
                    "–ö–∞—Ä—Ç–∞: <code>4276 6800 1260 0464</code>\n"
                    "–¢–µ–ª–µ—Ñ–æ–Ω, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ –∫–∞—Ä—Ç–µ: <code>+7 950 173 48 38</code>"
        ),
        "mtsbank": (
                    "üí≥ <b>–ú–¢–° –ë–∞–Ω–∫</b>\n\n"
                    "–í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞, –ø–æ–ø–æ–ª–Ω–∏–≤ –±–∞–ª–∞–Ω—Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞:\n"
                    "<code>+7 912 756 82 80</code>"
        ),
        "mailrussia": (
                    "üìÆ <b>–ü–æ—á—Ç–∞ –†–æ—Å—Å–∏–∏</b>\n\n"
                    "–ê–¥—Ä–µ—Å –¥–ª—è –ø–æ—á—Ç–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤:\n"
                    "<i>427550, –£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞,\n"
                    "–ø. –ë–∞–ª–µ–∑–∏–Ω–æ, –∞/—è 24,\n"
                    "–ö–æ—â–µ–µ–≤—É –°–µ—Ä–≥–µ—é –ò–≤–∞–Ω–æ–≤–∏—á—É</i>"
        )
        }
    bank_info = bank_description.get(bank_name)
    markup = get_show_bank()
    if not bank_info:
        await callback.answer('‚ùå –°–ø–æ—Å–æ–± –Ω–µ –Ω–∞–π–¥–µ–Ω', show_alert=True)
        
    await callback.message.edit_text(
    bank_info, reply_markup=markup
    )

     

# @router.callback_query(F.data.startswith('show_'))
# async def support_us_callback(callback: CallbackQuery):
#     """–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –±–∞–Ω–∫–∞."""
#     bank_name = callback.data.split('_')[1]
    
#     bank_description = {
#         "sberbank": (
#                     "üè¶ <b>–°–±–µ—Ä–±–∞–Ω–∫</b>\n\n"
#                     "–ü–æ–ª—É—á–∞—Ç–µ–ª—å: <i>–°–µ—Ä–≥–µ–π –ò–≤–∞–Ω–æ–≤–∏—á –ö.</i>\n"
#                     "–ö–∞—Ä—Ç–∞: <code>4276 6800 1260 0464</code>\n"
#                     "–¢–µ–ª–µ—Ñ–æ–Ω, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ –∫–∞—Ä—Ç–µ: <code>+7 950 173 48 38</code>"
#         ),
#         "mtsbank": (
#                     "üí≥ <b>–ú–¢–° –ë–∞–Ω–∫</b>\n\n"
#                     "–í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞, –ø–æ–ø–æ–ª–Ω–∏–≤ –±–∞–ª–∞–Ω—Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞:\n"
#                     "<code>+7 912 756 82 80</code>"
#         ),
#         "mailrussia": (
#                     "üìÆ <b>–ü–æ—á—Ç–∞ –†–æ—Å—Å–∏–∏</b>\n\n"
#                     "–ê–¥—Ä–µ—Å –¥–ª—è –ø–æ—á—Ç–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤:\n"
#                     "<i>427550, –£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞,\n"
#                     "–ø. –ë–∞–ª–µ–∑–∏–Ω–æ, –∞/—è 24,\n"
#                     "–ö–æ—â–µ–µ–≤—É –°–µ—Ä–≥–µ—é –ò–≤–∞–Ω–æ–≤–∏—á—É</i>"
#         )
#     }
#     bank_info = bank_description.get(bank_name)
#     if not bank_info:
#         await callback.answer('‚ùå –°–ø–æ—Å–æ–± –Ω–µ –Ω–∞–π–¥–µ–Ω', show_alert=True)
    
#     await callback.answer(
#         bank_info, show_alert=True
#     )

